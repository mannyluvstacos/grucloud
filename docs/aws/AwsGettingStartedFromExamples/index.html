<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.74">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="GruCloud Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="GruCloud Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-179962442-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-179962442-1",{anonymize_ip:!0})</script><title data-react-helmet="true">AwsGettingStartedFromExamples | GruCloud</title><meta data-react-helmet="true" property="og:url" content="https://grucloud.github.io//docs/aws/AwsGettingStartedFromExamples"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="AwsGettingStartedFromExamples | GruCloud"><meta data-react-helmet="true" name="description" content="This tutorial explains the deployment automation of a simple AWS EC2 instance with the GruCloud AWS provider."><meta data-react-helmet="true" property="og:description" content="This tutorial explains the deployment automation of a simple AWS EC2 instance with the GruCloud AWS provider."><link data-react-helmet="true" rel="shortcut icon" href="/img/cloud.svg"><link data-react-helmet="true" rel="canonical" href="https://grucloud.github.io//docs/aws/AwsGettingStartedFromExamples"><link data-react-helmet="true" rel="alternate" href="https://grucloud.github.io//docs/aws/AwsGettingStartedFromExamples" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://grucloud.github.io//docs/aws/AwsGettingStartedFromExamples" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9f3870a2.css">
<link rel="preload" href="/assets/js/styles.d474f54c.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.8b67b828.js" as="script">
<link rel="preload" href="/assets/js/main.edf7d93c.js" as="script">
<link rel="preload" href="/assets/js/1.30961389.js" as="script">
<link rel="preload" href="/assets/js/2.1b25332d.js" as="script">
<link rel="preload" href="/assets/js/3.acf81846.js" as="script">
<link rel="preload" href="/assets/js/1be78505.1c617f4d.js" as="script">
<link rel="preload" href="/assets/js/169.c249436b.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.e0b03b94.js" as="script">
<link rel="preload" href="/assets/js/17896441.ea84c954.js" as="script">
<link rel="preload" href="/assets/js/f9628e54.bdd39d38.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/cloud.svg" alt="GruCloud Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/cloud.svg" alt="GruCloud Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">GruCloud</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/grucloud/grucloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/cloud.svg" alt="GruCloud Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/cloud.svg" alt="GruCloud Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">GruCloud</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/Introduction">Docs</a></li><li class="menu__list-item"><a href="https://github.com/grucloud/grucloud" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">AwsGettingStartedFromExamples</h1></header><div class="markdown"><p>This tutorial explains the deployment automation of a simple <a href="https://aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">AWS EC2 instance</a> with the <a href="https://www.npmjs.com/package/@grucloud/provider-aws" target="_blank" rel="noopener noreferrer">GruCloud AWS provider</a>.</p><p>Instead of manually creating, updating, and destroying EC2 instances, the infrastructure will be described as Javascript code. The GruCloud CLI then reads this code, retrieves the lives resources through the AWS API, and decides what needs to be created, updated, or destroyed.</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/examples/aws/ec2-simple/artifacts/diagram-target.svg" alt="graph-diagram-ec2.svg"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="requirements"></a>Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">#</a></h2><p>The following chart explains the AWS requirements:</p><ul><li>AWS Account</li><li>AWS CLI</li><li>Access and Secret Key</li><li>Configure the AWS CLI</li></ul><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/docusaurus/plantuml/aws-requirements.svg" alt="AWS Requirements"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aws-account"></a>AWS Account<a class="hash-link" href="#aws-account" title="Direct link to heading">#</a></h3><p>Ensure access to the <a href="https://console.aws.amazon.com" target="_blank" rel="noopener noreferrer">Amazon Console</a> and create an account if necessary.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aws-cli"></a>AWS CLI<a class="hash-link" href="#aws-cli" title="Direct link to heading">#</a></h3><p>Ensure the <em>AWS CLI</em> is installed and configured:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws --version</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If not, visit <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="access-and-secret-key"></a>Access and Secret Key<a class="hash-link" href="#access-and-secret-key" title="Direct link to heading">#</a></h3><p>Visit the <a href="https://console.aws.amazon.com/iam/home#/security_credentials" target="_blank" rel="noopener noreferrer">security credentials</a></p><ul><li>Click on <strong>Access key (access key ID and secret access key).</strong></li><li>Click on the button <strong>Create New Access Key</strong>.</li></ul><p>Write down the <strong>AWSAccessKeyId</strong> and <strong>AWSSecretKey</strong></p><blockquote><p>In a further episode, the access and secret key will be obtained from a dedicated IAM user with the correct role and policy.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configure-aws-cli"></a>Configure AWS CLI<a class="hash-link" href="#configure-aws-cli" title="Direct link to heading">#</a></h3><p>Configure the account with the previously obtained <strong>AWSAccessKeyId</strong> and <strong>AWSSecretKey</strong>, as well as the region, for instance <code>us-east-1</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws configure</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getting-the-grucloud-cli"></a>Getting the GruCloud CLI<a class="hash-link" href="#getting-the-grucloud-cli" title="Direct link to heading">#</a></h3><p>This chart describes the way to install <strong>gc</strong>, the GruCloud CLI:</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/docusaurus/plantuml/grucloud-cli-install.svg" alt="gc-cli-install"></p><p>GruCloud is written in Javascript running on <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js</a>. Check if <code>node</code> is present on your system</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">node --version</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><blockquote><p>The version must be greater than 14</p></blockquote><p>Install the <em>GrucCloud</em> command-line utility <strong>gc</strong> with <em>npm</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm i -g @grucloud/core</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Check the current version of <strong>gc</strong>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc --version</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="code-architecture"></a>Code Architecture<a class="hash-link" href="#code-architecture" title="Direct link to heading">#</a></h2><p>In this section, we&#x27;ll create the files needed to describe an infrastructure with GruCloud:</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/docusaurus/plantuml/grucloud-project-files.svg" alt="grucloud-files"></p><ul><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/resources.js" target="_blank" rel="noopener noreferrer">resources.js</a>: creates the resources given a provider.</p></li><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/iac.js" target="_blank" rel="noopener noreferrer">iac.js</a>: exports <em>createStack</em> with provider and resources associated</p></li><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/config.js" target="_blank" rel="noopener noreferrer">config.js</a>: the config function.</p></li><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/package.json" target="_blank" rel="noopener noreferrer">package.json</a>: specifies the npm dependencies and other information.</p></li><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/hook.js" target="_blank" rel="noopener noreferrer">hooks.js</a>: optionally provides hook functions called after deployment or destruction.</p></li></ul><blockquote><p>The <a href="https://github.com/grucloud/grucloud/tree/main/examples/aws/ec2/ec2-simple" target="_blank" rel="noopener noreferrer">source code</a> for this example in on GitHub.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-a-new-project"></a>Create a new project<a class="hash-link" href="#create-a-new-project" title="Direct link to heading">#</a></h3><p>Create a new directory, for instance <code>ec2-example</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir ec2-example</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd ec2-example</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="packagejson"></a>package.json<a class="hash-link" href="#packagejson" title="Direct link to heading">#</a></h3><p>Let&#x27;s create a new <code>package.json</code> with the <code>npm init</code> command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm init</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s install the GruCloud AWS provider called <a href="https://www.npmjs.com/package/@grucloud/provider-aws" target="_blank" rel="noopener noreferrer">@grucloud/provider-aws</a>, as well as the GruCloud core library <code>@grucloud/core</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install @grucloud/core @grucloud/provider-aws</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configjs"></a>config.js<a class="hash-link" href="#configjs" title="Direct link to heading">#</a></h3><p>The configuration is a Javascript function located in <a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/config.js" target="_blank" rel="noopener noreferrer">config.js</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// config.js</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> pkg </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./package.json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> stage </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  projectName</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> pkg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>### resources.js</p><p>This file exports the <em>createResources</em> functions</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">createResources</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> provider </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  provider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">EC2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">makeInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;web-server-ec2-example&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">properties</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token maybe-class-name">InstanceType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;t2.micro&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token maybe-class-name">ImageId</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ami-056bfe7d8a7bdb9d0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">createResources</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> createResources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="iacjs"></a>iac.js<a class="hash-link" href="#iacjs" title="Direct link to heading">#</a></h3><p>Create a file called <code>iac.js</code> which stands for <em>infrastructure as code</em>.
We&#x27;ll first import <em>AwsProvider</em> from <a href="https://www.npmjs.com/package/@grucloud/provider-aws" target="_blank" rel="noopener noreferrer">@grucloud/provider-aws</a></p><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/iac.js" target="_blank" rel="noopener noreferrer">iac.js</a> must export the <code>createStack</code> function which returns the provider and the resources.</p><p>Then, instantiate <em>AwsProvider</em> by providing the <em>config</em> function.</p><p>In the case, an <a href="https://www.grucloud.com/docs/aws/resources/EC2/EC2" target="_blank" rel="noopener noreferrer">EC2 Instance</a> is defined with <code>provider.EC2.makeInstance</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// iac.js</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">AwsProvider</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@grucloud/provider-aws&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> createResources </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./resources&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">createStack</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> createProvider </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  provider</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createProvider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">AwsProvider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    createResources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    config</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./config&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  hooks</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./hook&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="grucloud-workflow"></a>GruCloud Workflow<a class="hash-link" href="#grucloud-workflow" title="Direct link to heading">#</a></h2><p>This chart depicts the workflow with the main <strong>gc</strong> commands:</p><ul><li>gc info</li><li>gc graph</li><li>gc apply</li><li>gc list</li><li>gc destroy</li></ul><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/docusaurus/plantuml/grucloud-cli-commands.svg" alt="grucloud commands"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="info"></a>Info<a class="hash-link" href="#info" title="Direct link to heading">#</a></h3><p>As a way to verify that <strong>gc</strong> can connect to the AWS API, one can use the <code>info</code> command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc info</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly txt"><div tabindex="0" class="prism-code language-txt codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - provider:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      name: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    accountId: 840541460064</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    zone: eu-west-2a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    config:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      projectName: ec2-simple</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ec2Instance:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name: web-server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        properties:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          InstanceType: t2.micro</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          ImageId: ami-00f6a0c18edb19300</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      stage: dev</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      region: eu-west-2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc info&quot; executed in 1s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deploy"></a>Deploy<a class="hash-link" href="#deploy" title="Direct link to heading">#</a></h3><p>We are ready to deploy with <code>apply</code> command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc apply</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Querying resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 6/6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Querying</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">┌──────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ 1 EC2 from aws                                                           │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┬──────────┬──────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ Name       │ Action   │ Data                                             │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┼──────────┼──────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ web-server │ CREATE   │ InstanceType: t2.micro                           │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ ImageId: ami-00f6a0c18edb19300                   │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ MaxCount: 1                                      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ MinCount: 1                                      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ TagSpecifications:                               │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │   - ResourceType: instance                       │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │     Tags:                                        │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: Name                                │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: web-server                        │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: ManagedBy                           │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: GruCloud                          │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: CreatedByProvider                   │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: aws                               │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: stage                               │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: dev                               │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: projectName                         │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: ec2-simple                        │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │                                                  │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────┴──────────┴──────────────────────────────────────────────────┘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ Plan summary for provider aws                                           │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├─────────────────────────────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ DEPLOY RESOURCES                                                        │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────────────┬────────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ EC2                │ web-server                                         │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────────────┴────────────────────────────────────────────────────┘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">? Are you sure to deploy 1 resource, 1 type on 1 provider? › (y/N)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>At this point, you are allowed to look at what is going to be deployed.
Type <code>y</code> to accept:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Deploying resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Deploying</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1 resource deployed of 1 type and 1 provider</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Running OnDeployedGlobal resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc a&quot; executed in 1m 29s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>When <code>gc apply</code> is executed a second time, resources should not be created or destroyed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly txt"><div tabindex="0" class="prism-code language-txt codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Querying resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 13/13</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Querying</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ Plan summary for provider aws                                                           │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────────────────┘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Nothing to deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Running OnDeployedGlobal resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc a&quot; executed in 9s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As expected, nothing to deploy, the target resources defined in the code match the live resources.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="list"></a>List<a class="hash-link" href="#list" title="Direct link to heading">#</a></h3><p>To list all the resources, and generate a diagram:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc list --graph --all</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This will include the default AWS resources such as VPC, subnet, internet gateway, and security group.</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/examples/aws/ec2-simple/artifacts/diagram-live.svg" alt="graph-live"></p><p>To list only the resources created by GruCloud:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc list --our</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly txt"><div tabindex="0" class="prism-code language-txt codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Listing resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 13/13</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ 1 EC2 from aws                                                                                          │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┬─────────────────────────────────────────────────────────────────────────────────────┬──────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ Name       │ Data                                                                                │ Our  │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┼─────────────────────────────────────────────────────────────────────────────────────┼──────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ web-server │ AmiLaunchIndex: 0                                                                   │ Yes  │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ImageId: ami-00f6a0c18edb19300                                                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ InstanceId: i-016628a1b6a6a2f91                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ InstanceType: t3.micro                                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ LaunchTime: 2021-04-29T23:10:44.000Z                                                │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Monitoring:                                                                         │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   State: disabled                                                                   │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Placement:                                                                          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   AvailabilityZone: eu-west-2a                                                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   GroupName:                                                                        │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Tenancy: default                                                                  │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ PrivateDnsName: ip-172-31-2-146.eu-west-2.compute.internal                          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ PrivateIpAddress: 172.31.2.146                                                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ProductCodes: []                                                                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ PublicDnsName: ec2-18-132-98-216.eu-west-2.compute.amazonaws.com                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ PublicIpAddress: 18.132.98.216                                                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ State:                                                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Code: 16                                                                          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Name: running                                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ StateTransitionReason:                                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ SubnetId: subnet-0f6f085fc384bf8ce                                                  │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ VpcId: vpc-bbbafcd3                                                                 │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Architecture: x86_64                                                                │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ BlockDeviceMappings:                                                                │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - DeviceName: /dev/sda1                                                           │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Ebs:                                                                            │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       AttachTime: 2021-04-29T23:10:45.000Z                                          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       DeleteOnTermination: true                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       Status: attached                                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       VolumeId: vol-0a88a34248fe18740                                               │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ClientToken: 7ef5fd60-e962-400f-a2b9-37719d8329ed                                   │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ EbsOptimized: false                                                                 │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ EnaSupport: true                                                                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Hypervisor: xen                                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ElasticGpuAssociations: []                                                          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ElasticInferenceAcceleratorAssociations: []                                         │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ NetworkInterfaces:                                                                  │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Association:                                                                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       IpOwnerId: amazon                                                             │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       PublicDnsName: ec2-18-132-98-216.eu-west-2.compute.amazonaws.com              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       PublicIp: 18.132.98.216                                                       │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Attachment:                                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       AttachTime: 2021-04-29T23:10:44.000Z                                          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       AttachmentId: eni-attach-02744addcff43ecbb                                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       DeleteOnTermination: true                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       DeviceIndex: 0                                                                │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       Status: attached                                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       NetworkCardIndex: 0                                                           │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Description:                                                                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Groups:                                                                         │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       - GroupName: default                                                          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │         GroupId: sg-f4139a96                                                        │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Ipv6Addresses: []                                                               │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     MacAddress: 06:ee:ef:d7:1c:48                                                   │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     NetworkInterfaceId: eni-06e9d87ff776cf40f                                       │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     OwnerId: 840541460064                                                           │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     PrivateDnsName: ip-172-31-2-146.eu-west-2.compute.internal                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     PrivateIpAddress: 172.31.2.146                                                  │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     PrivateIpAddresses:                                                             │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       - Association:                                                                │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │           IpOwnerId: amazon                                                         │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │           PublicDnsName: ec2-18-132-98-216.eu-west-2.compute.amazonaws.com          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │           PublicIp: 18.132.98.216                                                   │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │         Primary: true                                                               │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │         PrivateDnsName: ip-172-31-2-146.eu-west-2.compute.internal                  │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │         PrivateIpAddress: 172.31.2.146                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     SourceDestCheck: true                                                           │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Status: in-use                                                                  │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     SubnetId: subnet-0f6f085fc384bf8ce                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     VpcId: vpc-bbbafcd3                                                             │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     InterfaceType: interface                                                        │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ RootDeviceName: /dev/sda1                                                           │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ RootDeviceType: ebs                                                                 │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ SecurityGroups:                                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - GroupName: default                                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     GroupId: sg-f4139a96                                                            │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ SourceDestCheck: true                                                               │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Tags:                                                                               │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: Name                                                                       │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: web-server                                                               │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: stage                                                                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: dev                                                                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: CreatedByProvider                                                          │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: aws                                                                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: ManagedBy                                                                  │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: GruCloud                                                                 │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: projectName                                                                │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: ec2-simple                                                               │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ VirtualizationType: hvm                                                             │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ CpuOptions:                                                                         │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   CoreCount: 1                                                                      │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   ThreadsPerCore: 2                                                                 │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ CapacityReservationSpecification:                                                   │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   CapacityReservationPreference: open                                               │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ HibernationOptions:                                                                 │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Configured: false                                                                 │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Licenses: []                                                                        │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ MetadataOptions:                                                                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   State: applied                                                                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   HttpTokens: optional                                                              │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   HttpPutResponseHopLimit: 1                                                        │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   HttpEndpoint: enabled                                                             │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ EnclaveOptions:                                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Enabled: false                                                                    │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │                                                                                     │      │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────┴─────────────────────────────────────────────────────────────────────────────────────┴──────┘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">List Summary:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">┌────────────────────────────────────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ aws                                                                                                    │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────────────┬───────────────────────────────────────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ EC2                │ web-server                                                                        │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────────────┴───────────────────────────────────────────────────────────────────────────────────┘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1 resource, 7 types, 1 provider</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc l -o&quot; executed in 7s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><blockquote><p>Note that tags have been added to the EC2 Instance, it gives GruCloud a way to identify the resources under its control. Unlike other infrastructure as code tools such as Terraform and Pulumi, GruCloud does not need a <em>state</em> file. Hence removing a lot of complexity and issues.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="update"></a>Update<a class="hash-link" href="#update" title="Direct link to heading">#</a></h3><p>The ec2 instance configuration might change, for instance, let&#x27;s modify the machine type to <code>t3.micro</code> located in <em>config.js</em></p><p>The <code>plan</code> command is a read-only command which fetches the live resources and compares them with the target resources defined in the code.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc plan</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly txt"><div tabindex="0" class="prism-code language-txt codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Querying resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 13/13</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Querying</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">┌──────────────────────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ 1 EC2 from aws                                                                           │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┬──────────┬──────────────────────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ Name       │ Action   │ Data                                                             │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┼──────────┼──────────────────────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ web-server │ UPDATE   │ added:                                                           │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ updated:                                                         │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │   InstanceType: t3.micro                                         │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │                                                                  │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────┴──────────┴──────────────────────────────────────────────────────────────────┘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ Plan summary for provider aws                                                           │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ DEPLOY RESOURCES                                                                        │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────────────┬────────────────────────────────────────────────────────────────────┤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ EC2                │ web-server                                                         │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────────────┴────────────────────────────────────────────────────────────────────┘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1 resource to deploy on 1 provider</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc plan&quot; executed in 5s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s apply the change:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc apply</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><blockquote><p>Bear in mind that the machine requires to be stopped and restarted.</p></blockquote><p>Trust but verify, hence, list the EC2 instances and check the <code>InstanceType</code> has been changed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc l -t Instance</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="output"></a>Output<a class="hash-link" href="#output" title="Direct link to heading">#</a></h3><p>Another useful command is <em>gc output</em>, which extract information for a specific field of a given resource</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc output -t Instance --name web-server -f InstanceType</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly txt"><div tabindex="0" class="prism-code language-txt codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">t3.micro</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Nested field can be accessed too, for example, let&#x27;s retrieve the public IP address attached to the EC2 instance:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc output -t Instance --name web-server -f &#x27;NetworkInterfaces[0].Association.PublicIp&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly txt"><div tabindex="0" class="prism-code language-txt codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">18.130.34.212</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The temptation to ping is high:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ping `gc output -t Instance --name web-server -f &#x27;NetworkInterfaces[0].Association.PublicIp&#x27;`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly txt"><div tabindex="0" class="prism-code language-txt codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">PING 18.130.34.212 (18.130.34.212): 56 data bytes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">64 bytes from 18.130.34.212: icmp_seq=0 ttl=38 time=153.799 ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">64 bytes from 18.130.34.212: icmp_seq=1 ttl=38 time=153.583 ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">64 bytes from 18.130.34.212: icmp_seq=2 ttl=38 time=140.622 ms</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="destroy"></a>Destroy<a class="hash-link" href="#destroy" title="Direct link to heading">#</a></h3><p>Time to destroy the resources allocated and therefore save a lot of £$€.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc destroy</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Find Deletable resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 6/6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">? Are you sure to destroy 1 resource, 1 type on 1 provider? › (y/N)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Once again, you are allowed to look at what is going to be destroyed.
Type &#x27;y&#x27; to confirm the destruction:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Destroying resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Destroying</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1 resource destroyed, 1 type on 1 provider</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Running OnDestroyedGlobal resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc destroy&quot; executed in 1m 29s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s run the <code>gc list</code> command with the <code>Instance</code> filter to verify the I
ec2 instance is gone:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc l -t Instance</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Listing resources on 1 provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 6/6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">List Summary:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Provider: aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│ aws                                                                     │</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└─────────────────────────────────────────────────────────────────────────┘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0 resources, 0 types, 1 provider</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc list -t Instance&quot; executed in 3s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This example demonstrates how to code a very basic infrastructure with one EC2 instance, and how can we use the <code>gc apply</code>, <code>gc list</code>, <code>gc destroy</code>, and <code>gc graph</code> to manage the infrastructure.</p><p>It paves the way for more <a href="https://www.grucloud.com/docs/aws/AwsExamples" target="_blank" rel="noopener noreferrer">AWS examples</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="graph"></a>Graph<a class="hash-link" href="#graph" title="Direct link to heading">#</a></h3><p>A picture is worth a thousand words, GruCloud generates an SVG file describing the resources and their relationship.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gc graph</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here is the graph of a typical web application managed by Kubernetes running on AWS where the master node is managed by EKS.</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/examples/starhackit/eks-lean/artifacts/diagram-target.svg" alt="kubernetes eks"></p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link">Requirements</a><ul><li><a href="#aws-account" class="table-of-contents__link">AWS Account</a></li><li><a href="#aws-cli" class="table-of-contents__link">AWS CLI</a></li><li><a href="#access-and-secret-key" class="table-of-contents__link">Access and Secret Key</a></li><li><a href="#configure-aws-cli" class="table-of-contents__link">Configure AWS CLI</a></li><li><a href="#getting-the-grucloud-cli" class="table-of-contents__link">Getting the GruCloud CLI</a></li></ul></li><li><a href="#code-architecture" class="table-of-contents__link">Code Architecture</a><ul><li><a href="#create-a-new-project" class="table-of-contents__link">Create a new project</a></li><li><a href="#packagejson" class="table-of-contents__link">package.json</a></li><li><a href="#configjs" class="table-of-contents__link">config.js</a></li><li><a href="#iacjs" class="table-of-contents__link">iac.js</a></li></ul></li><li><a href="#grucloud-workflow" class="table-of-contents__link">GruCloud Workflow</a><ul><li><a href="#info" class="table-of-contents__link">Info</a></li><li><a href="#deploy" class="table-of-contents__link">Deploy</a></li><li><a href="#list" class="table-of-contents__link">List</a></li><li><a href="#update" class="table-of-contents__link">Update</a></li><li><a href="#output" class="table-of-contents__link">Output</a></li><li><a href="#destroy" class="table-of-contents__link">Destroy</a></li><li><a href="#graph" class="table-of-contents__link">Graph</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div><style data-emotion-css="1dszc5b">.css-1dszc5b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}</style><div class="css-1dszc5b"><style data-emotion-css="1qkzzwm">.css-1qkzzwm{margin:20px;}</style><div class="css-1qkzzwm"><h4 class="footer__title">Community</h4><style data-emotion-css="1tzzd34">.css-1tzzd34{padding:0 30px 0 00px;list-style:none;}</style><ul class="css-1tzzd34"><li><a href="https://twitter.com/grucloud_iac" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li><a href="https://stackoverflow.com/questions/tagged/grucloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li><a href="https://discord.com/channels/803645280359546920/803645355606147082" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="css-1qkzzwm"><h4 class="footer__title">Documentation</h4><ul class="css-1tzzd34"><li><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/aws/AwsGettingStarted">AWS</a></li><li><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/google/GoogleGettingStarted">Google Cloud</a></li><li><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/azure/AzureGettingStarted">Microsoft Azure</a></li><li><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/k8s/K8sGettingStarted">Kubernetes</a></li></ul></div></div><style data-emotion-css="gk60pb">.css-gk60pb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.css-gk60pb > div{padding-right:30px;}</style><div class="css-gk60pb"><div>Copyright © 2021 GruCloud</div><a href="https://www.freeprivacypolicy.com/live/ada70892-c887-4a1d-8d0e-29801fe215b2">Privacy Policy</a></div></div></footer></div>
<script src="/assets/js/styles.d474f54c.js"></script>
<script src="/assets/js/runtime~main.8b67b828.js"></script>
<script src="/assets/js/main.edf7d93c.js"></script>
<script src="/assets/js/1.30961389.js"></script>
<script src="/assets/js/2.1b25332d.js"></script>
<script src="/assets/js/3.acf81846.js"></script>
<script src="/assets/js/1be78505.1c617f4d.js"></script>
<script src="/assets/js/169.c249436b.js"></script>
<script src="/assets/js/935f2afb.e0b03b94.js"></script>
<script src="/assets/js/17896441.ea84c954.js"></script>
<script src="/assets/js/f9628e54.bdd39d38.js"></script>
</body>
</html>