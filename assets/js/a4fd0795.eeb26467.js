(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{151:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return u}));var o=n(3),a=n(8),c=(n(0),n(193)),r={id:"GoogleGettingStarted",title:"GCP Getting Started"},l={unversionedId:"google/GoogleGettingStarted",id:"google/GoogleGettingStarted",isDocsHomePage:!1,title:"GCP Getting Started",description:"Objective",source:"@site/docs/google/GoogleGettingStarted.md",sourceDirName:"google",slug:"/google/GoogleGettingStarted",permalink:"/docs/google/GoogleGettingStarted",version:"current",frontMatter:{id:"GoogleGettingStarted",title:"GCP Getting Started"},sidebar:"docs",previous:{title:"AwsGettingStarted",permalink:"/docs/aws/AwsGettingStarted"},next:{title:"Azure Getting Started",permalink:"/docs/azure/AzureGettingStarted"}},i=[{value:"Objective",id:"objective",children:[]},{value:"Requirements",id:"requirements",children:[{value:"GCP Account",id:"gcp-account",children:[]},{value:"gcloud",id:"gcloud",children:[]},{value:"Initialise gcloud",id:"initialise-gcloud",children:[]},{value:"SSH keys",id:"ssh-keys",children:[]},{value:"Node.js",id:"nodejs",children:[]},{value:"GruCloud CLI",id:"grucloud-cli",children:[]}]},{value:"Code Architecture",id:"code-architecture",children:[{value:"package.json",id:"packagejson",children:[]},{value:"config.js",id:"configjs",children:[]},{value:"iac.js",id:"iacjs",children:[]}]},{value:"Initialisation",id:"initialisation",children:[{value:"Project",id:"project",children:[]},{value:"API Services",id:"api-services",children:[]},{value:"Service Account",id:"service-account",children:[]},{value:"Roles Binding",id:"roles-binding",children:[]},{value:"Credential file",id:"credential-file",children:[]},{value:"Info",id:"info",children:[]}]},{value:"CLI Workflow",id:"cli-workflow",children:[{value:"Plan",id:"plan",children:[]},{value:"Deploy",id:"deploy",children:[]},{value:"List",id:"list",children:[]},{value:"Destroy",id:"destroy",children:[]}]},{value:"Next Steps",id:"next-steps",children:[]}],s={toc:i};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(o.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"objective"},"Objective"),Object(c.b)("p",null,"Let's automate the deployment of a virtual machine on GCP, the Google Cloud Platform."),Object(c.b)("p",null,"This basic infrastructure is going to be described and configured in Javascript with the GruCloud GCP provider, distributed as the NPM package ",Object(c.b)("a",{parentName:"p",href:"https://www.npmjs.com/package/@grucloud/provider-google"},"@grucloud/provider-google")),Object(c.b)("p",null,"This diagram represents the target resources that will be deployed:"),Object(c.b)("p",null,Object(c.b)("img",{parentName:"p",src:"https://raw.githubusercontent.com/grucloud/grucloud/main/examples/google/vm-simple/diagram-target.svg",alt:"graph-target-gpc-vm"})),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"The diagram is generated with ",Object(c.b)("inlineCode",{parentName:"p"},"gc graph"))),Object(c.b)("h2",{id:"requirements"},"Requirements"),Object(c.b)("h3",{id:"gcp-account"},"GCP Account"),Object(c.b)("p",null,"Access to the ",Object(c.b)("a",{parentName:"p",href:"https://console.cloud.google.com/home/dashboard"},"GCP console")," is required to run this tutorial."),Object(c.b)("h3",{id:"gcloud"},"gcloud"),Object(c.b)("p",null,"Ensure the GCP CLI called ",Object(c.b)("a",{parentName:"p",href:"https://cloud.google.com/sdk/docs/install"},"gcloud")," is installed:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"$ gcloud -v\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},"Google Cloud SDK 318.0.0\nbeta 2020.11.06\nbq 2.0.62\ncore 2020.11.06\ngsutil 4.54\n")),Object(c.b)("h3",{id:"initialise-gcloud"},"Initialise gcloud"),Object(c.b)("p",null,"Initialize ",Object(c.b)("em",{parentName:"p"},"gcloud")," in order to authenticate your user, as well and setting the default region and zone:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud init\n")),Object(c.b)("p",null,"Check the config at any time with:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud config list\n")),Object(c.b)("h3",{id:"ssh-keys"},"SSH keys"),Object(c.b)("p",null,"The section describes how to manage SSH keys to access the virtual machine."),Object(c.b)("p",null,"First of all, let's list the SSH keys that may have been already created:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud compute os-login ssh-keys list\n")),Object(c.b)("p",null,"Describe a specific key with:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud compute os-login ssh-keys describe --key=ad1811081881c04dad627f96b5d20ddd41fd44e31e76fc259c3e2534f75a190b\n")),Object(c.b)("p",null,"Let's create a new SSH key pair for this project and call it for instance ",Object(c.b)("inlineCode",{parentName:"p"},"gcp-vm_rsa")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"ssh-keygen -t rsa\n")),Object(c.b)("p",null,"Upload your ssh keys:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud compute os-login ssh-keys add --key-file gcp-vm_rsa.pub\n")),Object(c.b)("h3",{id:"nodejs"},"Node.js"),Object(c.b)("p",null,"GruCloud is written in Javascript running on ",Object(c.b)("a",{parentName:"p",href:"https://nodejs.org"},"Node.js")),Object(c.b)("p",null,"Verify the presence of ",Object(c.b)("em",{parentName:"p"},"node")," and check the version:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"node --version\n")),Object(c.b)("p",null,"Any version above 14 should be fine."),Object(c.b)("h3",{id:"grucloud-cli"},"GruCloud CLI"),Object(c.b)("p",null,"The GruCloud CLI called ",Object(c.b)("inlineCode",{parentName:"p"},"gc")," can be installed globally with NPM:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"npm i -g @grucloud/core\n")),Object(c.b)("p",null,"As a sanity check, display the version with:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc --version\n")),Object(c.b)("p",null,"That's all for these requirements."),Object(c.b)("h2",{id:"code-architecture"},"Code Architecture"),Object(c.b)("p",null,"The infrastructure will be configured and described as Javascript code, defined in the following file"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/google/vm-simple/package.json"},"package.json"),": contains the project dependencies."),Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/google/vm-simple/config.js"},"config.js"),": the configuration function."),Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/google/vm-simple/iac.js"},"iac.js"),": the infrastructure as code"),Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/google/vm-simple/hook.js"},"hook.js"),": user defined function executed after deployment or destruction.")),Object(c.b)("p",null,"The next sections show how to create a new project from scratch."),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"FYI, the ",Object(c.b)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/blob/main/examples/google/vm-simple"},"source code")," for this example.")),Object(c.b)("p",null,"First of all, create a new folder called for instance ",Object(c.b)("inlineCode",{parentName:"p"},"vm-simple")," and ",Object(c.b)("inlineCode",{parentName:"p"},"cd")," to it."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"mkdir vm-simple\ncd vm-simple\n")),Object(c.b)("h3",{id:"packagejson"},"package.json"),Object(c.b)("p",null,"The ",Object(c.b)("em",{parentName:"p"},"package.json")," file is usually created with:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"npm init\n")),Object(c.b)("p",null,"The project depends on libraries distributed on NPM. For this example targeting GCP, install ",Object(c.b)("a",{parentName:"p",href:"https://www.npmjs.com/package/@grucloud/provider-google"},"@grucloud/provider-google")," and ",Object(c.b)("inlineCode",{parentName:"p"},"@grucloud/core")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"npm install @grucloud/core @grucloud/provider-google\n")),Object(c.b)("h3",{id:"configjs"},"config.js"),Object(c.b)("p",null,"The configuration is defined in ",Object(c.b)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/blob/main/examples/google/vm-simple/config.js"},"config.js")),Object(c.b)("p",null,"The minimum is to set the ",Object(c.b)("em",{parentName:"p"},"projectName")," and ",Object(c.b)("em",{parentName:"p"},"projectId"),"."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-js"},"// config.js\n// TODO\n")),Object(c.b)("p",null,"GruCloud will take care of creating the project if necessary."),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"stage")," parameter by default is ",Object(c.b)("inlineCode",{parentName:"p"},"dev"),". It could be any value such as ",Object(c.b)("inlineCode",{parentName:"p"},"production"),", ",Object(c.b)("inlineCode",{parentName:"p"},"uat")," or any other stages of your deployment.\nNotice how the ",Object(c.b)("inlineCode",{parentName:"p"},"projectName")," could be prefixed or suffixed with stage."),Object(c.b)("h3",{id:"iacjs"},"iac.js"),Object(c.b)("p",null,"Now it is time to create the infrastructure ",Object(c.b)("strong",{parentName:"p"},"iac.js")," file that describes the architecture:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-js"},"// iac.js\n// TODO\n")),Object(c.b)("h2",{id:"initialisation"},"Initialisation"),Object(c.b)("p",null,"A few actions need to be performed prior to deploying the resources."),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Create the project"),Object(c.b)("li",{parentName:"ul"},"Setup billing for that project"),Object(c.b)("li",{parentName:"ul"},"Enable the API services"),Object(c.b)("li",{parentName:"ul"},"Create a service account"),Object(c.b)("li",{parentName:"ul"},"Create and save the credential file for this service account"),Object(c.b)("li",{parentName:"ul"},"Update the IAM policy by binding roles to the service account")),Object(c.b)("p",null,"The preparation steps are fully automated:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc init\n")),Object(c.b)("h3",{id:"project"},"Project"),Object(c.b)("p",null,"Let's verify the project has been created:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud projects list\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},"PROJECT_ID                      NAME                   PROJECT_NUMBER\nvm-tuto                         vm-tuto                623960601462\n")),Object(c.b)("p",null,"Perfect, the project has been created automatically based on our config."),Object(c.b)("h3",{id:"api-services"},"API Services"),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"init")," command takes care of enabling the minimum set of API services:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"cloudbilling.googleapis.com"),Object(c.b)("li",{parentName:"ul"},"cloudresourcemanager.googleapis.com"),Object(c.b)("li",{parentName:"ul"},"iam.googleapis.com"),Object(c.b)("li",{parentName:"ul"},"serviceusage.googleapis.com")),Object(c.b)("p",null,"Let's check all the services in the ",Object(c.b)("em",{parentName:"p"},"enabled")," state:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud services list --enabled\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},"NAME                                 TITLE\nbigquery.googleapis.com              BigQuery API\nbigquerystorage.googleapis.com       BigQuery Storage API\ncloudbilling.googleapis.com          Cloud Billing API\nclouddebugger.googleapis.com         Cloud Debugger API\ncloudresourcemanager.googleapis.com  Cloud Resource Manager API\ncloudtrace.googleapis.com            Cloud Trace API\ncompute.googleapis.com               Compute Engine API\ndatastore.googleapis.com             Cloud Datastore API\ndns.googleapis.com                   Cloud DNS API\ndomains.googleapis.com               Cloud Domains API\niam.googleapis.com                   Identity and Access Management (IAM) API\niamcredentials.googleapis.com        IAM Service Account Credentials API\nlogging.googleapis.com               Cloud Logging API\nmonitoring.googleapis.com            Cloud Monitoring API\nnetworkmanagement.googleapis.com     Network Management API\noslogin.googleapis.com               Cloud OS Login API\nservicemanagement.googleapis.com     Service Management API\nserviceusage.googleapis.com          Service Usage API\nsql-component.googleapis.com         Cloud SQL\nstorage-api.googleapis.com           Google Cloud Storage JSON API\nstorage-component.googleapis.com     Cloud Storage\nstorage.googleapis.com               Cloud Storage API\n")),Object(c.b)("h3",{id:"service-account"},"Service Account"),Object(c.b)("p",null,"A service account called in the form of ",Object(c.b)("inlineCode",{parentName:"p"},"grucloud@YouProjecId.iam.gserviceaccount.com")," is created and will be used by GruCloud to talk to GCP."),Object(c.b)("p",null,"Let's retrieve the list of service accounts:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud iam service-accounts list\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},"DISPLAY NAME              EMAIL                                                    DISABLED\ngrucloud service account  grucloud@grucloud-e2e.iam.gserviceaccount.com            False\n")),Object(c.b)("p",null,"Bingo, the service account has been created successfully."),Object(c.b)("h3",{id:"roles-binding"},"Roles Binding"),Object(c.b)("p",null,"Next, the operation is to bind the following roles to the service account ",Object(c.b)("inlineCode",{parentName:"p"},"grucloud@vm-tuto1.iam.gserviceaccount.com")),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"iam.serviceAccountAdmin"),Object(c.b)("li",{parentName:"ul"},"compute.admin"),Object(c.b)("li",{parentName:"ul"},"storage.admin"),Object(c.b)("li",{parentName:"ul"},"storage.objectAdmin"),Object(c.b)("li",{parentName:"ul"},"dns.admin"),Object(c.b)("li",{parentName:"ul"},"editor"),Object(c.b)("li",{parentName:"ul"},"resourcemanager.projectIamAdmin")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud projects get-iam-policy  vm-tuto1\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},"bindings:\n- members:\n  - serviceAccount:grucloud@vm-tuto1.iam.gserviceaccount.com\n  role: roles/compute.admin\n- members:\n  - serviceAccount:service-571739547473@compute-system.iam.gserviceaccount.com\n  role: roles/compute.serviceAgent\n- members:\n  - serviceAccount:grucloud@vm-tuto1.iam.gserviceaccount.com\n  role: roles/dns.admin\n- members:\n  - serviceAccount:571739547473-compute@developer.gserviceaccount.com\n  - serviceAccount:571739547473@cloudservices.gserviceaccount.com\n  - serviceAccount:grucloud@vm-tuto1.iam.gserviceaccount.com\n  role: roles/editor\n- members:\n  - serviceAccount:grucloud@vm-tuto1.iam.gserviceaccount.com\n  role: roles/iam.serviceAccountAdmin\n- members:\n  - user:frederic.heem@gmail.com\n  role: roles/owner\n- members:\n  - serviceAccount:grucloud@vm-tuto1.iam.gserviceaccount.com\n  role: roles/resourcemanager.projectIamAdmin\n- members:\n  - serviceAccount:grucloud@vm-tuto1.iam.gserviceaccount.com\n  role: roles/storage.admin\n- members:\n  - serviceAccount:grucloud@vm-tuto1.iam.gserviceaccount.com\n  role: roles/storage.objectAdmin\netag: BwXBNb1KkZg=\nversion: 1\n")),Object(c.b)("p",null,"As expected, the roles are bounded to our service account."),Object(c.b)("h3",{id:"credential-file"},"Credential file"),Object(c.b)("p",null,"A credential file is generated and is located at ",Object(c.b)("inlineCode",{parentName:"p"},"/Users/yourusername/.config/gcloud/YourProjectId.json")),Object(c.b)("p",null,"For your information, here what it looks like:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'{\n  "type": "service_account",\n  "project_id": "vm-tuto1",\n  "private_key_id": "112233445566aabb00d4e4071478a7ca74c",\n  "private_key": "-----BEGIN PRIVATE KEY-----\\nTHE PRIVATE KEY HERE\\n-----END PRIVATE KEY-----\\n",\n  "client_email": "grucloud@vm-tuto1.iam.gserviceaccount.com",\n  "client_id": "123456789858242482",\n  "auth_uri": "https://accounts.google.com/o/oauth2/auth",\n  "token_uri": "https://oauth2.googleapis.com/token",\n  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",\n  "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/grucloud%40vm-tuto1.iam.gserviceaccount.com"\n}\n')),Object(c.b)("h3",{id:"info"},"Info"),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"info")," provides useful information about the project and its configuration:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc info\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},'  - provider:\n      name: google\n      type: google\n    projectId: vm-tuto1\n    projectName: vm-tuto1\n    applicationCredentialsFile: /Users/yourusername/.config/gcloud/vm-tuto1.json\n    serviceAccountName: grucloud\n    hasGCloud: true\n    config:\n      vm:\n        name: web-server\n        properties:\n          diskSizeGb: 20\n          machineType: f1-micro\n          sourceImage: projects/ubuntu-os-cloud/global/images/family/ubuntu-2004-lts\n          metadata:\n            items:\n              - key: enable-oslogin\n                value: True\n      managedByTag: -managed-by-gru\n      managedByKey: managed-by\n      managedByValue: grucloud\n      region: southamerica-east1\n      zone: southamerica-east1-b\n\nCommand "gc info" executed in 1s\n')),Object(c.b)("p",null,"At this stage, the system is ready for deployment."),Object(c.b)("h2",{id:"cli-workflow"},"CLI Workflow"),Object(c.b)("p",null,"The infrastructure can be managed with a bunch of commands:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"gc plan")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"gc apply")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"gc list")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"gc destroy"))),Object(c.b)("h3",{id:"plan"},"Plan"),Object(c.b)("p",null,"Find out which resources are going to be allocated:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc plan\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},'Querying resources on 1 provider: google\n\u2713 google\n  \u2713 Initialising\n  \u2713 Listing 6/6\n  \u2713 Querying\n    \u2713 VmInstance 1/1\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1 VmInstance from google                                                                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Name       \u2502 Action   \u2502 Data                                                                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 web-server \u2502 CREATE   \u2502 kind: compute#instance                                                      \u2502\n\u2502            \u2502          \u2502 name: web-server                                                            \u2502\n\u2502            \u2502          \u2502 zone: projects/vm-tuto1/zones/southamerica-east1-b                          \u2502\n\u2502            \u2502          \u2502 machineType: projects/vm-tuto1/zones/southamerica-east1-b/machineTypes/f1-\u2026 \u2502\n\u2502            \u2502          \u2502 labels:                                                                     \u2502\n\u2502            \u2502          \u2502   managed-by: grucloud                                                      \u2502\n\u2502            \u2502          \u2502   stage: dev                                                                \u2502\n\u2502            \u2502          \u2502 metadata:                                                                   \u2502\n\u2502            \u2502          \u2502   items:                                                                    \u2502\n\u2502            \u2502          \u2502     - key: enable-oslogin                                                   \u2502\n\u2502            \u2502          \u2502       value: True                                                           \u2502\n\u2502            \u2502          \u2502   kind: compute#metadata                                                    \u2502\n\u2502            \u2502          \u2502 disks:                                                                      \u2502\n\u2502            \u2502          \u2502   - kind: compute#attachedDisk                                              \u2502\n\u2502            \u2502          \u2502     type: PERSISTENT                                                        \u2502\n\u2502            \u2502          \u2502     boot: true                                                              \u2502\n\u2502            \u2502          \u2502     mode: READ_WRITE                                                        \u2502\n\u2502            \u2502          \u2502     autoDelete: true                                                        \u2502\n\u2502            \u2502          \u2502     deviceName: web-server-managed-by-gru                                   \u2502\n\u2502            \u2502          \u2502     initializeParams:                                                       \u2502\n\u2502            \u2502          \u2502       sourceImage: projects/ubuntu-os-cloud/global/images/family/ubuntu-20\u2026 \u2502\n\u2502            \u2502          \u2502       diskType: projects/vm-tuto1/zones/southamerica-east1-b/diskTypes/pd-\u2026 \u2502\n\u2502            \u2502          \u2502       diskSizeGb: 20                                                        \u2502\n\u2502            \u2502          \u2502     diskEncryptionKey:                                                      \u2502\n\u2502            \u2502          \u2502 networkInterfaces:                                                          \u2502\n\u2502            \u2502          \u2502   - kind: compute#networkInterface                                          \u2502\n\u2502            \u2502          \u2502     subnetwork: projects/vm-tuto1/regions/southamerica-east1/subnetworks/d\u2026 \u2502\n\u2502            \u2502          \u2502     accessConfigs:                                                          \u2502\n\u2502            \u2502          \u2502       - kind: compute#accessConfig                                          \u2502\n\u2502            \u2502          \u2502         name: External NAT                                                  \u2502\n\u2502            \u2502          \u2502         type: ONE_TO_ONE_NAT                                                \u2502\n\u2502            \u2502          \u2502         networkTier: PREMIUM                                                \u2502\n\u2502            \u2502          \u2502     aliasIpRanges: []                                                       \u2502\n\u2502            \u2502          \u2502 displayDevice:                                                              \u2502\n\u2502            \u2502          \u2502   enableDisplay: false                                                      \u2502\n\u2502            \u2502          \u2502 canIpForward: false                                                         \u2502\n\u2502            \u2502          \u2502 scheduling:                                                                 \u2502\n\u2502            \u2502          \u2502   preemptible: false                                                        \u2502\n\u2502            \u2502          \u2502   onHostMaintenance: MIGRATE                                                \u2502\n\u2502            \u2502          \u2502   automaticRestart: true                                                    \u2502\n\u2502            \u2502          \u2502   nodeAffinities: []                                                        \u2502\n\u2502            \u2502          \u2502 deletionProtection: false                                                   \u2502\n\u2502            \u2502          \u2502 reservationAffinity:                                                        \u2502\n\u2502            \u2502          \u2502   consumeReservationType: ANY_RESERVATION                                   \u2502\n\u2502            \u2502          \u2502 shieldedInstanceConfig:                                                     \u2502\n\u2502            \u2502          \u2502   enableSecureBoot: false                                                   \u2502\n\u2502            \u2502          \u2502   enableVtpm: true                                                          \u2502\n\u2502            \u2502          \u2502   enableIntegrityMonitoring: true                                           \u2502\n\u2502            \u2502          \u2502 confidentialInstanceConfig:                                                 \u2502\n\u2502            \u2502          \u2502   enableConfidentialCompute: false                                          \u2502\n\u2502            \u2502          \u2502                                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Plan summary for provider google                                                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 DEPLOY RESOURCES                                                                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 VmInstance         \u2502 web-server                                                                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n1 resource to deploy on 1 provider\nCommand "gc plan" executed in 6s\n')),Object(c.b)("p",null,"Have the opportunity to review the change that will be applied next."),Object(c.b)("h3",{id:"deploy"},"Deploy"),Object(c.b)("p",null,"Happy with the expected plan? Deploy it now:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc apply\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},'Querying resources on 1 provider: google\n\u2713 google\n  \u2713 Initialising\n  \u2713 Listing 6/6\n  \u2713 Querying\n    \u2713 VmInstance 1/1\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Plan summary for provider google                                                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 DEPLOY RESOURCES                                                                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 VmInstance         \u2502 web-server                                                                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2714 Are you sure to deploy 1 resource, 1 type on 1 provider? \u2026 yes\nDeploying resources on 1 provider: google\n\u2713 google\n  \u2713 Initialising\n  \u2713 Deploying\n    \u2713 VmInstance 1/1\n1 resource deployed of 1 type and 1 provider\nRunning OnDeployedGlobal resources on 1 provider: google\nCommand "gc a" executed in 21s\n')),Object(c.b)("p",null,"Verify the newly created server is accessible through SSH:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gcloud compute ssh web-server --project vm-tuto1\n")),Object(c.b)("p",null,"Mission accomplished! The server is installed, up and running."),Object(c.b)("p",null,"Triple check the instance is running on the ",Object(c.b)("a",{parentName:"p",href:"https://console.cloud.google.com/compute/instances"},"gcp compute console")),Object(c.b)("h3",{id:"list"},"List"),Object(c.b)("p",null,"The command queries the GCP API and lists the available resources. It gives an overall view of the resources under the current project."),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"--graph")," options generate a diagram of the live resources, showing their dependencies."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc list --graph\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'[...TRUNCATED]\nList Summary:\nProvider: google\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 google                                                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Network            \u2502 default                                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Firewall           \u2502 default-allow-icmp                               \u2502\n\u2502                    \u2502 default-allow-internal                           \u2502\n\u2502                    \u2502 default-allow-rdp                                \u2502\n\u2502                    \u2502 default-allow-ssh                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 SubNetwork         \u2502 default                                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 ServiceAccount     \u2502 571739547473-compute                             \u2502\n\u2502                    \u2502 grucloud                                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 VmInstance         \u2502 web-server                                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n9 resources, 5 types, 1 provider\nCommand "gc l" executed in 12s\n')),Object(c.b)("p",null,Object(c.b)("img",{parentName:"p",src:"https://raw.githubusercontent.com/grucloud/grucloud/main/examples/google/vm-simple/diagram-live.svg",alt:"graph-live-gcp-vm"})),Object(c.b)("p",null,"Notice the default ",Object(c.b)("inlineCode",{parentName:"p"},"Network"),", ",Object(c.b)("inlineCode",{parentName:"p"},"Subnet"),", and 4 ",Object(c.b)("inlineCode",{parentName:"p"},"Firewall")," rules."),Object(c.b)("p",null,"There are many options to the ",Object(c.b)("em",{parentName:"p"},"list command"),", for instance, list only the resources created by GruCloud"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc list --our\n")),Object(c.b)("p",null,"Would you like to display only the virtual machines?"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc l -t VmInstance\n")),Object(c.b)("p",null,"Remember the service account created in the ",Object(c.b)("inlineCode",{parentName:"p"},"init")," phase?"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"}," gc l -t ServiceAccount\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},'Listing resources on 1 provider: google\n\u2713 google\n  \u2713 Initialising\n  \u2713 Listing 1/1\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2 ServiceAccount from google                                                                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Name                 \u2502 Data                                                                  \u2502 Our  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 571739547473-compute \u2502 name: projects/vm-tuto1/serviceAccounts/571739547473-compute@develop\u2026 \u2502 NO   \u2502\n\u2502                      \u2502 projectId: vm-tuto1                                                   \u2502      \u2502\n\u2502                      \u2502 uniqueId: 100537252433166772587                                       \u2502      \u2502\n\u2502                      \u2502 email: 571739547473-compute@developer.gserviceaccount.com             \u2502      \u2502\n\u2502                      \u2502 displayName: Compute Engine default service account                   \u2502      \u2502\n\u2502                      \u2502 etag: MDEwMjE5MjA=                                                    \u2502      \u2502\n\u2502                      \u2502 oauth2ClientId: 100537252433166772587                                 \u2502      \u2502\n\u2502                      \u2502 iamPolicy:                                                            \u2502      \u2502\n\u2502                      \u2502   etag: ACAB                                                          \u2502      \u2502\n\u2502                      \u2502                                                                       \u2502      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 grucloud             \u2502 name: projects/vm-tuto1/serviceAccounts/grucloud@vm-tuto1.iam.gservi\u2026 \u2502 NO   \u2502\n\u2502                      \u2502 projectId: vm-tuto1                                                   \u2502      \u2502\n\u2502                      \u2502 uniqueId: 105136741134058242482                                       \u2502      \u2502\n\u2502                      \u2502 email: grucloud@vm-tuto1.iam.gserviceaccount.com                      \u2502      \u2502\n\u2502                      \u2502 displayName: grucloud service account                                 \u2502      \u2502\n\u2502                      \u2502 etag: MDEwMjE5MjA=                                                    \u2502      \u2502\n\u2502                      \u2502 oauth2ClientId: 105136741134058242482                                 \u2502      \u2502\n\u2502                      \u2502 iamPolicy:                                                            \u2502      \u2502\n\u2502                      \u2502   etag: ACAB                                                          \u2502      \u2502\n\u2502                      \u2502                                                                       \u2502      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\nList Summary:\nProvider: google\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 google                                                                                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 ServiceAccount     \u2502 571739547473-compute                                                          \u2502\n\u2502                    \u2502 grucloud                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n2 resources, 1 type, 1 provider\nCommand "gc l -t ServiceAccount" executed in 5s\n')),Object(c.b)("p",null,"Notice here GCP has created a default service account for the compute engine."),Object(c.b)("h3",{id:"destroy"},"Destroy"),Object(c.b)("p",null,"When the resources are no longer needed, delete them with the ",Object(c.b)("inlineCode",{parentName:"p"},"destroy")," command"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},"gc destroy\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-txt"},'Find Deletable resources on 1 provider: google\n\u2713 google\n  \u2713 Initialising\n  \u2713 Listing 6/6\n  [TRUNCATED]\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Destroy summary for provider google                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 VmInstance         \u2502 web-server                                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2714 Are you sure to destroy 1 resource, 1 type on 1 provider? \u2026 yes\nDestroying resources on 1 provider: google\n\u2713 google\n  \u2713 Initialising\n  \u2713 Destroying\n    \u2713 VmInstance 1/1\n1 resource destroyed, 1 type on 1 provider\nRunning OnDestroyedGlobal resources on 1 provider: google\nCommand "gc destroy" executed in 1m 20s\n')),Object(c.b)("p",null,"If the ",Object(c.b)("inlineCode",{parentName:"p"},"destroy")," command is executed again, no resources should be destroyed."),Object(c.b)("p",null,"Double check with ",Object(c.b)("inlineCode",{parentName:"p"},"gc list --our"),"."),Object(c.b)("h2",{id:"next-steps"},"Next Steps"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Browse the various ",Object(c.b)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/tree/main/examples/google"},"examples")," which helps to find out how to use this software.")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Available ",Object(c.b)("a",{parentName:"p",href:"http://localhost:3000/docs/Introduction"},"GCP Resources")))))}u.isMDXComponent=!0},193:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g}));var o=n(0),a=n.n(o);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},c=Object.keys(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),u=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=u(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,c=e.originalType,r=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),b=u(n),d=o,g=b["".concat(r,".").concat(d)]||b[d]||p[d]||c;return n?a.a.createElement(g,l(l({ref:t},s),{},{components:n})):a.a.createElement(g,l({ref:t},s))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var c=n.length,r=new Array(c);r[0]=d;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var s=2;s<c;s++)r[s]=n[s];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);